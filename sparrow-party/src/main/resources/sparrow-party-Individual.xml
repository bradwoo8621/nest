<?xml version="1.0" encoding="UTF-8"?>

<beans
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:p="http://www.springframework.org/schema/p"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/util 
    	http://www.springframework.org/schema/util/spring-util.xsd">
	<!-- com.github.nest.sparrow.party.internal.Individual -->
	<!-- extends from Party, share the table -->
	<bean
		id="Individual"
		class="com.github.nest.arcteryx.persistent.internal.StandalonePersistentBeanDescriptor"
		p:resourceClass="com.github.nest.sparrow.party.internal.Individual"
		p:name="Individual"
		p:description="Individual abstract implementation, lead all individual type sub classes"
		scope="singleton"
		p:extendsFromBeanClass="com.github.nest.sparrow.party.internal.Party"
		p:discriminatorValue="I">
		<property name="properties">
			<list>
				<!-- id number -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="idNumber"
					p:description="ID number of individual">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.PrimitivePersistentColumn"
							p:name="ID_NUMBER"
							p:type="STRING" />
					</property>
				</bean>
				<!-- gender -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="gender"
					p:description="Gender of individual">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.ManyToOnePersistentColumn"
							p:referencedBeanClass="com.github.nest.goose.internal.human.Gender"
							p:referencedBeanContextName="goose-context"
							p:foreignKeyColumnName="GENDER_CODE"
							p:foreignKeyPropertyName="code" />
					</property>
				</bean>
				<!-- first name -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="firstName"
					p:description="First name of individual">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.PrimitivePersistentColumn"
							p:name="FIRST_NAME"
							p:type="STRING" />
					</property>
				</bean>
				<!-- middle name -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="middleName"
					p:description="Middle name of individual">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.PrimitivePersistentColumn"
							p:name="MIDDLE_NAME"
							p:type="STRING" />
					</property>
				</bean>
				<!-- last name -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="lastName"
					p:description="Last name of individual">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.PrimitivePersistentColumn"
							p:name="LAST_NAME"
							p:type="STRING" />
					</property>
				</bean>
				<!-- date of birth -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="dateOfBirth"
					p:description="Birthday of individual">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.PrimitivePersistentColumn"
							p:name="DATE_OF_BIRTH"
							p:type="DATE" />
					</property>
				</bean>
				<!-- date of death -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="dateOfDeath"
					p:description="Date of death of individual">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.PrimitivePersistentColumn"
							p:name="DATE_OF_DEATH"
							p:type="DATE" />
					</property>
				</bean>
				<!-- born-in country -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="bornIn"
					p:description="Born-in country of individual">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.ManyToOnePersistentColumn"
							p:referencedBeanClass="com.github.nest.goose.internal.location.Country"
							p:referencedBeanContextName="goose-context"
							p:foreignKeyColumnName="BORN_IN_COUNTRY_CODE"
							p:foreignKeyPropertyName="code" />
					</property>
				</bean>
				<!-- nationality -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="nationality"
					p:description="Nationality of individual">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.ManyToOnePersistentColumn"
							p:referencedBeanClass="com.github.nest.goose.internal.location.Country"
							p:referencedBeanContextName="goose-context"
							p:foreignKeyColumnName="NATIONALITY_CODE"
							p:foreignKeyPropertyName="code" />
					</property>
				</bean>
				<!-- TODO work experiences -->
				<!-- education experiences -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="educationExperiences"
					p:description="education experiences of individual">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.OneToManyPersistentColumn"
							p:subordinateBeanClass="com.github.nest.sparrow.party.internal.EducationExperience"
							p:foreignKeyColumnName="PARTY_ID">
							<property name="collectionParameter">
								<bean
									class="com.github.nest.arcteryx.persistent.internal.BagCollectionParameter" />
							</property>
						</bean>
					</property>
				</bean>
			</list>
		</property>
	</bean>
	<!-- com.github.nest.sparrow.party.internal.EducationExperience -->
	<bean
		id="EducationExperience"
		class="com.github.nest.arcteryx.persistent.internal.StandalonePersistentBeanDescriptor"
		scope="singleton"
		p:resourceClass="com.github.nest.sparrow.party.internal.EducationExperience"
		p:description="EducationExperience"
		p:tableName="T_PARTY_EDUCATION_EXPERIENCE">
		<property name="properties">
			<list>
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="experienceId"
					p:description="ID of educational experience">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.PrimitivePersistentColumn"
							p:name="EDUCATION_EXPERIENCE_ID"
							p:primaryKey="true"
							p:type="LONG">
							<property name="primaryKeyGenerator">
								<bean
									class="com.github.nest.arcteryx.persistent.internal.hibernate.pkgenerator.SequenceKey"
									p:sequenceName="S_PARTY_EDUCATION_EXPERIENCE" />
							</property>
						</bean>
					</property>
				</bean>
				<!-- educational organization -->
				<!-- TODO consider a simple object of education organization -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="organization"
					p:description="Educational organization of educational experience">
					<!-- the column is refer to a role, not a party -->
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.ManyToOnePersistentColumn"
							p:referencedBeanClass="com.github.nest.sparrow.party.internal.EducationOrganization"
							p:foreignKeyColumnName="EDUCATION_ORGANIZATION_ID" />
					</property>
				</bean>
				<!-- academic major -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="academicMajor"
					p:description="Academic major of educational experience">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.ManyToOnePersistentColumn"
							p:referencedBeanClass="com.github.nest.sparrow.party.internal.codes.AcademicMajor"
							p:foreignKeyColumnName="MAJOR_CODE"
							p:foreignKeyPropertyName="code" />
					</property>
				</bean>
				<!-- education degree -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="degree"
					p:description="Education degree of educational experience">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.ManyToOnePersistentColumn"
							p:referencedBeanClass="com.github.nest.sparrow.party.internal.codes.EducationDegree"
							p:foreignKeyColumnName="DEGREE_CODE"
							p:foreignKeyPropertyName="code" />
					</property>
				</bean>
				<!-- start date -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="startDate"
					p:description="Start date of educational experience">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.PrimitivePersistentColumn"
							p:name="START_DATE"
							p:type="DATE" />
					</property>
				</bean>
				<!-- end date -->
				<bean
					class="com.github.nest.arcteryx.persistent.internal.PersistentBeanPropertyDescriptor"
					p:name="endDate"
					p:description="End date of educational experience">
					<property name="persistentColumn">
						<bean
							class="com.github.nest.arcteryx.persistent.internal.PrimitivePersistentColumn"
							p:name="END_DATE"
							p:type="DATE" />
					</property>
				</bean>
			</list>
		</property>
	</bean>
</beans>